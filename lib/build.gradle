plugins {
    id 'java-library'
    id 'com.github.johnrengelman.shadow' version '8.1.1'
}

tasks.assemble.dependsOn tasks.shadowJar
tasks.build.dependsOn tasks.shadowJar

tasks.named("jar").configure {
    enabled = false
}

shadowJar {
    exclude '**/*package-info.class'
    
    exclude '**/*jdk/internal/jrtfs/SystemImage*'
    exclude '**/*javax/lang/model/SourceVersion*' 
    exclude '**/*javax/tools/ToolProvider*'  
    exclude '**/*com/sun/tools/javac/code/Source*'
    exclude '**/*com/sun/tools/javac/file/JavacFileManager*'
    exclude '**/*com/sun/tools/javac/file/JRTIndex*'
    exclude '**/*com/sun/tools/javac/file/Locations*'
    exclude '**/*com/sun/tools/javac/file/FSInfo*'

    archiveFileName.set("${project.name}.jar")
}

dependencies {
    implementation fileTree(dir: 'libs', include: ['*.aar', '*.jar'])
}